{"ast":null,"code":"var _jsxFileName = \"/Users/ethan/Desktop/Code/myTinerary/mitinerary/client/src/components/display/components/Attractions/AttractionsHome.js\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport React, { useState } from \"react\";\nimport Retrieve from \"./Retrieve\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AttractionsHome = props => {\n  _s();\n  console.log(props.loc);\n  let activeH = props.loc.hotels ? props.loc.hotels : {};\n  let activeR = props.loc.restaurants ? props.loc.restaurants : {};\n  let activeA = props.loc.attractions ? props.loc.attraction : {};\n  const [attractions, setAttractions] = useState({\n    hotels: activeH,\n    restaurants: activeR,\n    attractions: activeA\n  });\n  //need error handling\n  //saving canbe done with each add and remove with mongo, but want to reduce api calls\n  const save = async () => {\n    try {\n      let qs = \"\";\n      for (let key in attractions) {\n        if (key === 'hotels') {\n          qs += 'hotels_';\n        } else if (key === 'restaurants') {\n          qs += \"restaurants_\";\n        } else if (key === 'attractions') {\n          qs += 'attractions_';\n        }\n        console.log(attractions[key]);\n        for (let place in attractions[key]) {\n          console.log(attractions[key][place]);\n          if (key === 'hotels') {\n            qs = qs + attractions[key][place].hotel_id + \"_\";\n          } else {\n            qs = qs + attractions[key][place].location_id + \"_\";\n          }\n        }\n      }\n      const updated = await axios.get(`http://localhost:7000/sync/${props.selected}/${qs}`);\n      console.log('backend saved');\n      console.log('updated', updated);\n      props.receiveTrip(updated);\n    } catch {\n      console.log('error saving');\n    }\n  };\n\n  //could just put ids instead to improve speed above. Want to wait till i have db set up though before deciding\n  const add = (place, category) => {\n    console.log('add called');\n    let copy = Object.assign({}, attractions);\n    copy[category][place.name ? place.name : place.hotel_name] = place;\n    console.log(copy);\n    setAttractions(copy);\n  };\n  const remove = (place, category) => {\n    console.log('remove called');\n    let copy = Object.assign({}, attractions);\n    delete copy[category][place.name ? place.name : place.hotel_name];\n    setAttractions(copy);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        props.go(false);\n        save();\n      },\n      children: \" Go back\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"columns\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column-one-third\",\n        children: /*#__PURE__*/_jsxDEV(Retrieve, {\n          type: 'hotels',\n          loc: props.loc,\n          add: add,\n          remove: remove,\n          attractions: attractions\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column-one-third\",\n        children: /*#__PURE__*/_jsxDEV(Retrieve, {\n          type: 'restaurants',\n          loc: props.loc,\n          add: add,\n          remove: remove,\n          attractions: attractions\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column-one-third\",\n        children: /*#__PURE__*/_jsxDEV(Retrieve, {\n          type: 'attractions',\n          loc: props.loc,\n          add: add,\n          remove: remove,\n          attractions: attractions\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this);\n};\n//Note: Attraction is passed as type because it is needed for api, switches to more succinct attr after\n_s(AttractionsHome, \"2b3pTpj8p2cpqBxTgJ0lHvm4fYY=\");\n_c = AttractionsHome;\nexport default AttractionsHome;\nvar _c;\n$RefreshReg$(_c, \"AttractionsHome\");","map":{"version":3,"names":["axios","React","useState","Retrieve","AttractionsHome","props","console","log","loc","activeH","hotels","activeR","restaurants","activeA","attractions","attraction","setAttractions","save","qs","key","place","hotel_id","location_id","updated","get","selected","receiveTrip","add","category","copy","Object","assign","name","hotel_name","remove","go"],"sources":["/Users/ethan/Desktop/Code/myTinerary/mitinerary/client/src/components/display/components/Attractions/AttractionsHome.js"],"sourcesContent":["import axios from \"axios\";\nimport React,{useState} from \"react\";\nimport Retrieve from \"./Retrieve\";\n\nconst AttractionsHome=(props)=>{\n    console.log(props.loc)\n    let activeH=props.loc.hotels?props.loc.hotels:{}\n    let activeR=props.loc.restaurants?props.loc.restaurants:{}\n    let activeA=props.loc.attractions?props.loc.attraction:{}\n    const[attractions,setAttractions]=useState(\n        {hotels:activeH,restaurants:activeR,attractions:activeA}\n    )\n    //need error handling\n    //saving canbe done with each add and remove with mongo, but want to reduce api calls\n    const save=async()=>{\n        try{\n            let qs=\"\"\n            for(let key in attractions){\n                if(key==='hotels'){\n                    qs+='hotels_'\n                }else if(key==='restaurants'){\n                    qs+=\"restaurants_\"\n                }else if(key==='attractions'){\n                    qs+='attractions_'\n                }\n                console.log(attractions[key])\n                for(let place in attractions[key]){\n                    console.log(attractions[key][place])\n                    if(key==='hotels'){\n                        qs=qs+attractions[key][place].hotel_id+\"_\"\n                    }else{\n                        qs=qs+attractions[key][place].location_id+\"_\"\n                    }\n                }\n            }\n            const updated=await axios.get(`http://localhost:7000/sync/${props.selected}/${qs}`)\n            console.log('backend saved')\n            console.log('updated',updated)\n            props.receiveTrip(updated)\n        }catch{\n            console.log('error saving')\n        }\n\n    }\n\n    //could just put ids instead to improve speed above. Want to wait till i have db set up though before deciding\n    const add=(place,category)=>{\n        console.log('add called')\n        let copy=Object.assign({},attractions)\n        copy[category][place.name?place.name:place.hotel_name]=place\n        console.log(copy)\n        setAttractions(copy)\n    }\n    const remove=(place,category)=>{\n        console.log('remove called')\n        let copy=Object.assign({},attractions)\n        delete copy[category][place.name?place.name:place.hotel_name]\n        setAttractions(copy)\n    }\n    return(\n        <div className=\"card\">\n            <button onClick={()=>{props.go(false);save()}}> Go back</button>\n            <div className=\"columns\">\n                <div className=\"column-one-third\">\n                    <Retrieve type={'hotels'}loc={props.loc} add={add} remove={remove} attractions={attractions}/>\n                </div>\n                <div className=\"column-one-third\">\n                    <Retrieve type={'restaurants'} loc={props.loc} add={add} remove={remove} attractions={attractions}/>\n                </div>\n                <div className=\"column-one-third\">\n                    <Retrieve type={'attractions'} loc={props.loc} add={add} remove={remove} attractions={attractions}/>\n                </div>\n            </div>\n        </div>\n    )\n}\n//Note: Attraction is passed as type because it is needed for api, switches to more succinct attr after\n\nexport default AttractionsHome"],"mappings":"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"},"metadata":{},"sourceType":"module"}