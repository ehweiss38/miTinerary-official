{"ast":null,"code":"var _jsxFileName = \"/Users/ethan/Desktop/Code/miTinerary-official/client/src/components/display/components/Attractions/AttractionsHome.js\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport React, { useState } from \"react\";\nimport Retrieve from \"./Retrieve\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AttractionsHome = props => {\n  _s();\n  console.log(props.loc);\n  //tracks all attractions that have been added so they can be saved\n  let activeH = props.loc.hotels ? props.loc.hotels : {};\n  let activeR = props.loc.restaurants ? props.loc.restaurants : {};\n  let activeA = props.loc.attractions ? props.loc.attractions : {};\n  console.log('active a', activeA);\n  const [attractions, setAttractions] = useState({\n    hotels: activeH,\n    restaurants: activeR,\n    attractions: activeA\n  });\n  const [loading, setLoading] = useState(true);\n  let loaded = 0;\n  const loadedTracker = () => {\n    loaded++;\n    console.log('loaded', loaded);\n    if (loaded === 3) {\n      setLoading(false);\n    }\n    return;\n  };\n  //need error handling\n  //saving canbe done with each add and remove with mongo, but want to reduce api calls\n  const save = async () => {\n    try {\n      let qs = \"\";\n      for (let key in attractions) {\n        if (key === 'hotels') {\n          qs += 'hotels_';\n        } else if (key === 'restaurants') {\n          qs += \"restaurants_\";\n        } else if (key === 'attractions') {\n          qs += 'attractions_';\n        }\n        console.log(attractions[key]);\n        for (let place in attractions[key]) {\n          console.log(attractions[key][place]);\n          if (key === 'hotels') {\n            qs = qs + attractions[key][place].hotel_id + \"_\";\n          } else {\n            qs = qs + attractions[key][place].location_id + \"_\";\n          }\n        }\n      }\n      const updated = await axios.get(`https://mitinerary-js.herokuapp.com/home/sync/${props.selected}/${qs}`, {\n        withCredentials: true\n      });\n      console.log('backend saved');\n      console.log('updated', updated.data);\n      props.receiveTrip(updated.data);\n    } catch {\n      console.log('error saving');\n    }\n  };\n  const hideLoaded = !loading ? {\n    display: 'none'\n  } : {};\n  const showLoaded = loading ? {\n    display: 'none'\n  } : {\n    marginLeft: 55\n  };\n  //could just put ids instead to improve speed above. Want to wait till i have db set up though before deciding\n  const add = (place, category) => {\n    console.log('add called');\n    let copy = Object.assign({}, attractions);\n    copy[category][place.name ? place.name : place.hotel_name] = place;\n    console.log(copy);\n    setAttractions(copy);\n  };\n  const remove = (place, category) => {\n    console.log('remove called');\n    let copy = Object.assign({}, attractions);\n    delete copy[category][place.name ? place.name : place.hotel_name];\n    setAttractions(copy);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    children: [/*#__PURE__*/_jsxDEV(\"a\", {\n      onClick: () => {\n        props.go(false);\n        save();\n      },\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        class: \"fa-solid fa-arrow-left has-text-primary\",\n        style: {\n          fontSize: 20,\n          marginLeft: 15,\n          marginTop: 15\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 56\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: hideLoaded,\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        class: \"fa-solid fa-spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"columns\",\n      style: showLoaded,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column-one-third\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            marginLeft: 170\n          },\n          children: \"Hotels\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dispColumn\",\n          children: /*#__PURE__*/_jsxDEV(Retrieve, {\n            type: 'hotels',\n            loc: props.loc,\n            add: add,\n            remove: remove,\n            attractions: attractions,\n            loadedTracker: loadedTracker\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column-one-third\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            marginLeft: 150\n          },\n          children: \"Restaurants\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dispColumn\",\n          children: /*#__PURE__*/_jsxDEV(Retrieve, {\n            type: 'restaurants',\n            loc: props.loc,\n            add: add,\n            remove: remove,\n            attractions: attractions,\n            loadedTracker: loadedTracker\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column-one-third dispColumn\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            marginLeft: 150\n          },\n          children: \"Attractions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Retrieve, {\n            type: 'attractions',\n            loc: props.loc,\n            add: add,\n            remove: remove,\n            attractions: attractions,\n            loadedTracker: loadedTracker\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this);\n};\n//Note: Attraction is passed as type because it is needed for api, switches to more succinct attr after\n_s(AttractionsHome, \"/1JFDnKa7nhds59mAupCO+Jljng=\");\n_c = AttractionsHome;\nexport default AttractionsHome;\nvar _c;\n$RefreshReg$(_c, \"AttractionsHome\");","map":{"version":3,"names":["axios","React","useState","Retrieve","AttractionsHome","props","console","log","loc","activeH","hotels","activeR","restaurants","activeA","attractions","setAttractions","loading","setLoading","loaded","loadedTracker","save","qs","key","place","hotel_id","location_id","updated","get","selected","withCredentials","data","receiveTrip","hideLoaded","display","showLoaded","marginLeft","add","category","copy","Object","assign","name","hotel_name","remove","go","fontSize","marginTop"],"sources":["/Users/ethan/Desktop/Code/miTinerary-official/client/src/components/display/components/Attractions/AttractionsHome.js"],"sourcesContent":["import axios from \"axios\";\nimport React,{useState} from \"react\";\nimport Retrieve from \"./Retrieve\";\n\nconst AttractionsHome=(props)=>{\n    console.log(props.loc)\n    //tracks all attractions that have been added so they can be saved\n    let activeH=props.loc.hotels?props.loc.hotels:{}\n    let activeR=props.loc.restaurants?props.loc.restaurants:{}\n    let activeA=props.loc.attractions?props.loc.attractions:{}\n    console.log('active a',activeA)\n    const[attractions,setAttractions]=useState(\n        {hotels:activeH,restaurants:activeR,attractions:activeA}\n    )\n    const[loading,setLoading]=useState(true)\n\n    let loaded=0\n\n    const loadedTracker=()=>{\n        loaded++\n        console.log('loaded',loaded)\n        if(loaded===3){\n            setLoading(false)\n        }\n        return\n    }\n    //need error handling\n    //saving canbe done with each add and remove with mongo, but want to reduce api calls\n    const save=async()=>{\n        try{\n            let qs=\"\"\n            for(let key in attractions){\n                if(key==='hotels'){\n                    qs+='hotels_'\n                }else if(key==='restaurants'){\n                    qs+=\"restaurants_\"\n                }else if(key==='attractions'){\n                    qs+='attractions_'\n                }\n                console.log(attractions[key])\n                for(let place in attractions[key]){\n                    console.log(attractions[key][place])\n                    if(key==='hotels'){\n                        qs=qs+attractions[key][place].hotel_id+\"_\"\n                    }else{\n                        qs=qs+attractions[key][place].location_id+\"_\"\n                    }\n                }\n            }\n            const updated=await axios.get(`https://mitinerary-js.herokuapp.com/home/sync/${props.selected}/${qs}`,{withCredentials: true })\n            console.log('backend saved')\n            console.log('updated',updated.data)\n            props.receiveTrip(updated.data)\n        }catch{\n            console.log('error saving')\n        }\n\n    }\n    const hideLoaded=!loading?{display:'none'}:{}\n    const showLoaded=loading?{display:'none'}:{marginLeft:55}\n    //could just put ids instead to improve speed above. Want to wait till i have db set up though before deciding\n    const add=(place,category)=>{\n        console.log('add called')\n        let copy=Object.assign({},attractions)\n        copy[category][place.name?place.name:place.hotel_name]=place\n        console.log(copy)\n        setAttractions(copy)\n    }\n    const remove=(place,category)=>{\n        console.log('remove called')\n        let copy=Object.assign({},attractions)\n        delete copy[category][place.name?place.name:place.hotel_name]\n        setAttractions(copy)\n    }\n    return(\n        <div className=\"card\">\n            <a onClick={()=>{props.go(false);save()}} ><i class=\"fa-solid fa-arrow-left has-text-primary\" style={{fontSize:20,marginLeft:15,marginTop:15}}></i></a>\n            <div style={hideLoaded}>\n                <i class=\"fa-solid fa-spinner\"></i>\n            </div>\n            <div className=\"columns\" style={showLoaded}>\n                <div className=\"column-one-third\">\n                    <h1 style={{marginLeft:170}}>Hotels</h1>\n                    <div className=\"dispColumn\">\n                        <Retrieve type={'hotels'}loc={props.loc} add={add} remove={remove} attractions={attractions} loadedTracker={loadedTracker}/>\n                    </div>\n                </div>\n                <div className=\"column-one-third\">\n                    <h1 style={{marginLeft:150}}>Restaurants</h1>\n                    <div className=\"dispColumn\">\n                        <Retrieve type={'restaurants'} loc={props.loc} add={add} remove={remove} attractions={attractions} loadedTracker={loadedTracker}/>\n                    </div>\n                </div>\n                <div className=\"column-one-third dispColumn\">\n                    <h1 style={{marginLeft:150}}>Attractions</h1>\n                    <div>\n                        <Retrieve type={'attractions'} loc={props.loc} add={add} remove={remove} attractions={attractions} loadedTracker={loadedTracker}/>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n//Note: Attraction is passed as type because it is needed for api, switches to more succinct attr after\n\nexport default AttractionsHome"],"mappings":"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"},"metadata":{},"sourceType":"module"}