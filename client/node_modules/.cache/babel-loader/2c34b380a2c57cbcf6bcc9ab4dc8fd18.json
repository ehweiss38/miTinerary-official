{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ethan/Desktop/Code/miTinerary-official/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/ethan/Desktop/Code/miTinerary-official/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/ethan/Desktop/Code/miTinerary-official/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import React,{useState}from\"react\";import Retrieve from\"./Retrieve\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AttractionsHome=function AttractionsHome(props){console.log(props.loc);var activeH=props.loc.hotels?props.loc.hotels:{};var activeR=props.loc.restaurants?props.loc.restaurants:{};var activeA=props.loc.attractions?props.loc.attractions:{};console.log('active a',activeA);var _useState=useState({hotels:activeH,restaurants:activeR,attractions:activeA}),_useState2=_slicedToArray(_useState,2),attractions=_useState2[0],setAttractions=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var loaded=0;var loadedTracker=function loadedTracker(){loaded++;console.log('loaded',loaded);if(loaded===3){setLoading(false);}return;};//need error handling\n//saving canbe done with each add and remove with mongo, but want to reduce api calls\nvar save=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var qs,key,place,updated;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;qs=\"\";for(key in attractions){if(key==='hotels'){qs+='hotels_';}else if(key==='restaurants'){qs+=\"restaurants_\";}else if(key==='attractions'){qs+='attractions_';}console.log(attractions[key]);for(place in attractions[key]){console.log(attractions[key][place]);if(key==='hotels'){qs=qs+attractions[key][place].hotel_id+\"_\";}else{qs=qs+attractions[key][place].location_id+\"_\";}}}_context.next=5;return axios.get(\"https://mitinerary-js.herokuapp.com/sync/\".concat(props.selected,\"/\").concat(qs));case 5:updated=_context.sent;console.log('backend saved');console.log('updated',updated.data);props.receiveTrip(updated.data);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log('error saving');case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function save(){return _ref.apply(this,arguments);};}();var hideLoaded=!loading?{display:'none'}:{};var showLoaded=loading?{display:'none'}:{};//could just put ids instead to improve speed above. Want to wait till i have db set up though before deciding\nvar add=function add(place,category){console.log('add called');var copy=Object.assign({},attractions);copy[category][place.name?place.name:place.hotel_name]=place;console.log(copy);setAttractions(copy);};var remove=function remove(place,category){console.log('remove called');var copy=Object.assign({},attractions);delete copy[category][place.name?place.name:place.hotel_name];setAttractions(copy);};return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){props.go(false);save();},children:/*#__PURE__*/_jsx(\"i\",{class:\"fa-solid fa-arrow-left has-text-primary\",style:{fontSize:20,marginLeft:15,marginTop:15}})}),/*#__PURE__*/_jsx(\"div\",{style:hideLoaded,children:/*#__PURE__*/_jsx(\"i\",{class:\"fa-solid fa-spinner\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"columns\",style:showLoaded,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"column-one-third\",children:[/*#__PURE__*/_jsx(\"h1\",{style:{marginLeft:170},children:\"Hotels\"}),/*#__PURE__*/_jsx(\"div\",{className:\"dispColumn\",children:/*#__PURE__*/_jsx(Retrieve,{type:'hotels',loc:props.loc,add:add,remove:remove,attractions:attractions,loadedTracker:loadedTracker})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"column-one-third\",children:[/*#__PURE__*/_jsx(\"h1\",{style:{marginLeft:150},children:\"Restaurants\"}),/*#__PURE__*/_jsx(\"div\",{className:\"dispColumn\",children:/*#__PURE__*/_jsx(Retrieve,{type:'restaurants',loc:props.loc,add:add,remove:remove,attractions:attractions,loadedTracker:loadedTracker})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"column-one-third dispColumn\",children:[/*#__PURE__*/_jsx(\"h1\",{style:{marginLeft:150},children:\"Attractions\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Retrieve,{type:'attractions',loc:props.loc,add:add,remove:remove,attractions:attractions,loadedTracker:loadedTracker})})]})]})]});};//Note: Attraction is passed as type because it is needed for api, switches to more succinct attr after\nexport default AttractionsHome;","map":{"version":3,"names":["axios","React","useState","Retrieve","AttractionsHome","props","console","log","loc","activeH","hotels","activeR","restaurants","activeA","attractions","setAttractions","loading","setLoading","loaded","loadedTracker","save","qs","key","place","hotel_id","location_id","get","selected","updated","data","receiveTrip","hideLoaded","display","showLoaded","add","category","copy","Object","assign","name","hotel_name","remove","go","fontSize","marginLeft","marginTop"],"sources":["/Users/ethan/Desktop/Code/miTinerary-official/client/src/components/display/components/Attractions/AttractionsHome.js"],"sourcesContent":["import axios from \"axios\";\nimport React,{useState} from \"react\";\nimport Retrieve from \"./Retrieve\";\n\nconst AttractionsHome=(props)=>{\n    console.log(props.loc)\n    let activeH=props.loc.hotels?props.loc.hotels:{}\n    let activeR=props.loc.restaurants?props.loc.restaurants:{}\n    let activeA=props.loc.attractions?props.loc.attractions:{}\n    console.log('active a',activeA)\n    const[attractions,setAttractions]=useState(\n        {hotels:activeH,restaurants:activeR,attractions:activeA}\n    )\n    const[loading,setLoading]=useState(true)\n\n    let loaded=0\n\n    const loadedTracker=()=>{\n        loaded++\n        console.log('loaded',loaded)\n        if(loaded===3){\n            setLoading(false)\n        }\n        return\n    }\n    //need error handling\n    //saving canbe done with each add and remove with mongo, but want to reduce api calls\n    const save=async()=>{\n        try{\n            let qs=\"\"\n            for(let key in attractions){\n                if(key==='hotels'){\n                    qs+='hotels_'\n                }else if(key==='restaurants'){\n                    qs+=\"restaurants_\"\n                }else if(key==='attractions'){\n                    qs+='attractions_'\n                }\n                console.log(attractions[key])\n                for(let place in attractions[key]){\n                    console.log(attractions[key][place])\n                    if(key==='hotels'){\n                        qs=qs+attractions[key][place].hotel_id+\"_\"\n                    }else{\n                        qs=qs+attractions[key][place].location_id+\"_\"\n                    }\n                }\n            }\n            const updated=await axios.get(`https://mitinerary-js.herokuapp.com/sync/${props.selected}/${qs}`)\n            console.log('backend saved')\n            console.log('updated',updated.data)\n            props.receiveTrip(updated.data)\n        }catch{\n            console.log('error saving')\n        }\n\n    }\n    const hideLoaded=!loading?{display:'none'}:{}\n    const showLoaded=loading?{display:'none'}:{}\n    //could just put ids instead to improve speed above. Want to wait till i have db set up though before deciding\n    const add=(place,category)=>{\n        console.log('add called')\n        let copy=Object.assign({},attractions)\n        copy[category][place.name?place.name:place.hotel_name]=place\n        console.log(copy)\n        setAttractions(copy)\n    }\n    const remove=(place,category)=>{\n        console.log('remove called')\n        let copy=Object.assign({},attractions)\n        delete copy[category][place.name?place.name:place.hotel_name]\n        setAttractions(copy)\n    }\n    return(\n        <div className=\"card\">\n            <a onClick={()=>{props.go(false);save()}} ><i class=\"fa-solid fa-arrow-left has-text-primary\" style={{fontSize:20,marginLeft:15,marginTop:15}}></i></a>\n            <div style={hideLoaded}>\n                <i class=\"fa-solid fa-spinner\"></i>\n            </div>\n            <div className=\"columns\" style={showLoaded}>\n                <div className=\"column-one-third\">\n                    <h1 style={{marginLeft:170}}>Hotels</h1>\n                    <div className=\"dispColumn\">\n                        <Retrieve type={'hotels'}loc={props.loc} add={add} remove={remove} attractions={attractions} loadedTracker={loadedTracker}/>\n                    </div>\n                </div>\n                <div className=\"column-one-third\">\n                    <h1 style={{marginLeft:150}}>Restaurants</h1>\n                    <div className=\"dispColumn\">\n                        <Retrieve type={'restaurants'} loc={props.loc} add={add} remove={remove} attractions={attractions} loadedTracker={loadedTracker}/>\n                    </div>\n                </div>\n                <div className=\"column-one-third dispColumn\">\n                    <h1 style={{marginLeft:150}}>Attractions</h1>\n                    <div>\n                        <Retrieve type={'attractions'} loc={props.loc} add={add} remove={remove} attractions={attractions} loadedTracker={loadedTracker}/>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n//Note: Attraction is passed as type because it is needed for api, switches to more succinct attr after\n\nexport default AttractionsHome"],"mappings":"8aAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,MAAOC,MAAK,EAAEC,QAAQ,KAAO,OAAO,CACpC,MAAOC,SAAQ,KAAM,YAAY,CAAC,wFAElC,GAAMC,gBAAe,CAAC,QAAhBA,gBAAe,CAAEC,KAAK,CAAG,CAC3BC,OAAO,CAACC,GAAG,CAACF,KAAK,CAACG,GAAG,CAAC,CACtB,GAAIC,QAAO,CAACJ,KAAK,CAACG,GAAG,CAACE,MAAM,CAACL,KAAK,CAACG,GAAG,CAACE,MAAM,CAAC,CAAC,CAAC,CAChD,GAAIC,QAAO,CAACN,KAAK,CAACG,GAAG,CAACI,WAAW,CAACP,KAAK,CAACG,GAAG,CAACI,WAAW,CAAC,CAAC,CAAC,CAC1D,GAAIC,QAAO,CAACR,KAAK,CAACG,GAAG,CAACM,WAAW,CAACT,KAAK,CAACG,GAAG,CAACM,WAAW,CAAC,CAAC,CAAC,CAC1DR,OAAO,CAACC,GAAG,CAAC,UAAU,CAACM,OAAO,CAAC,CAC/B,cAAkCX,QAAQ,CACtC,CAACQ,MAAM,CAACD,OAAO,CAACG,WAAW,CAACD,OAAO,CAACG,WAAW,CAACD,OAAO,CAAC,CAC3D,wCAFKC,WAAW,eAACC,cAAc,eAGhC,eAA0Bb,QAAQ,CAAC,IAAI,CAAC,yCAAlCc,OAAO,eAACC,UAAU,eAExB,GAAIC,OAAM,CAAC,CAAC,CAEZ,GAAMC,cAAa,CAAC,QAAdA,cAAa,EAAK,CACpBD,MAAM,EAAE,CACRZ,OAAO,CAACC,GAAG,CAAC,QAAQ,CAACW,MAAM,CAAC,CAC5B,GAAGA,MAAM,GAAG,CAAC,CAAC,CACVD,UAAU,CAAC,KAAK,CAAC,CACrB,CACA,OACJ,CAAC,CACD;AACA;AACA,GAAMG,KAAI,4FAAC,8KAECC,EAAE,CAAC,EAAE,CACT,IAAQC,GAAG,GAAIR,YAAW,CAAC,CACvB,GAAGQ,GAAG,GAAG,QAAQ,CAAC,CACdD,EAAE,EAAE,SAAS,CACjB,CAAC,IAAK,IAAGC,GAAG,GAAG,aAAa,CAAC,CACzBD,EAAE,EAAE,cAAc,CACtB,CAAC,IAAK,IAAGC,GAAG,GAAG,aAAa,CAAC,CACzBD,EAAE,EAAE,cAAc,CACtB,CACAf,OAAO,CAACC,GAAG,CAACO,WAAW,CAACQ,GAAG,CAAC,CAAC,CAC7B,IAAQC,KAAK,GAAIT,YAAW,CAACQ,GAAG,CAAC,CAAC,CAC9BhB,OAAO,CAACC,GAAG,CAACO,WAAW,CAACQ,GAAG,CAAC,CAACC,KAAK,CAAC,CAAC,CACpC,GAAGD,GAAG,GAAG,QAAQ,CAAC,CACdD,EAAE,CAACA,EAAE,CAACP,WAAW,CAACQ,GAAG,CAAC,CAACC,KAAK,CAAC,CAACC,QAAQ,CAAC,GAAG,CAC9C,CAAC,IAAI,CACDH,EAAE,CAACA,EAAE,CAACP,WAAW,CAACQ,GAAG,CAAC,CAACC,KAAK,CAAC,CAACE,WAAW,CAAC,GAAG,CACjD,CACJ,CACJ,CAAC,sBACmBzB,MAAK,CAAC0B,GAAG,oDAA6CrB,KAAK,CAACsB,QAAQ,aAAIN,EAAE,EAAG,QAA3FO,OAAO,eACbtB,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC,CAC5BD,OAAO,CAACC,GAAG,CAAC,SAAS,CAACqB,OAAO,CAACC,IAAI,CAAC,CACnCxB,KAAK,CAACyB,WAAW,CAACF,OAAO,CAACC,IAAI,CAAC,kFAE/BvB,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC,sEAGlC,kBA7BKa,KAAI,0CA6BT,CACD,GAAMW,WAAU,CAAC,CAACf,OAAO,CAAC,CAACgB,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAC7C,GAAMC,WAAU,CAACjB,OAAO,CAAC,CAACgB,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAC5C;AACA,GAAME,IAAG,CAAC,QAAJA,IAAG,CAAEX,KAAK,CAACY,QAAQ,CAAG,CACxB7B,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC,CACzB,GAAI6B,KAAI,CAACC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,CAACxB,WAAW,CAAC,CACtCsB,IAAI,CAACD,QAAQ,CAAC,CAACZ,KAAK,CAACgB,IAAI,CAAChB,KAAK,CAACgB,IAAI,CAAChB,KAAK,CAACiB,UAAU,CAAC,CAACjB,KAAK,CAC5DjB,OAAO,CAACC,GAAG,CAAC6B,IAAI,CAAC,CACjBrB,cAAc,CAACqB,IAAI,CAAC,CACxB,CAAC,CACD,GAAMK,OAAM,CAAC,QAAPA,OAAM,CAAElB,KAAK,CAACY,QAAQ,CAAG,CAC3B7B,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC,CAC5B,GAAI6B,KAAI,CAACC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,CAACxB,WAAW,CAAC,CACtC,MAAOsB,KAAI,CAACD,QAAQ,CAAC,CAACZ,KAAK,CAACgB,IAAI,CAAChB,KAAK,CAACgB,IAAI,CAAChB,KAAK,CAACiB,UAAU,CAAC,CAC7DzB,cAAc,CAACqB,IAAI,CAAC,CACxB,CAAC,CACD,mBACI,aAAK,SAAS,CAAC,MAAM,wBACjB,UAAG,OAAO,CAAE,kBAAI,CAAC/B,KAAK,CAACqC,EAAE,CAAC,KAAK,CAAC,CAACtB,IAAI,EAAE,EAAE,uBAAE,UAAG,KAAK,CAAC,yCAAyC,CAAC,KAAK,CAAE,CAACuB,QAAQ,CAAC,EAAE,CAACC,UAAU,CAAC,EAAE,CAACC,SAAS,CAAC,EAAE,CAAE,EAAK,EAAI,cACvJ,YAAK,KAAK,CAAEd,UAAW,uBACnB,UAAG,KAAK,CAAC,qBAAqB,EAAK,EACjC,cACN,aAAK,SAAS,CAAC,SAAS,CAAC,KAAK,CAAEE,UAAW,wBACvC,aAAK,SAAS,CAAC,kBAAkB,wBAC7B,WAAI,KAAK,CAAE,CAACW,UAAU,CAAC,GAAG,CAAE,oBAAY,cACxC,YAAK,SAAS,CAAC,YAAY,uBACvB,KAAC,QAAQ,EAAC,IAAI,CAAE,QAAS,IAAG,CAAEvC,KAAK,CAACG,GAAI,CAAC,GAAG,CAAE0B,GAAI,CAAC,MAAM,CAAEO,MAAO,CAAC,WAAW,CAAE3B,WAAY,CAAC,aAAa,CAAEK,aAAc,EAAE,EAC1H,GACJ,cACN,aAAK,SAAS,CAAC,kBAAkB,wBAC7B,WAAI,KAAK,CAAE,CAACyB,UAAU,CAAC,GAAG,CAAE,yBAAiB,cAC7C,YAAK,SAAS,CAAC,YAAY,uBACvB,KAAC,QAAQ,EAAC,IAAI,CAAE,aAAc,CAAC,GAAG,CAAEvC,KAAK,CAACG,GAAI,CAAC,GAAG,CAAE0B,GAAI,CAAC,MAAM,CAAEO,MAAO,CAAC,WAAW,CAAE3B,WAAY,CAAC,aAAa,CAAEK,aAAc,EAAE,EAChI,GACJ,cACN,aAAK,SAAS,CAAC,6BAA6B,wBACxC,WAAI,KAAK,CAAE,CAACyB,UAAU,CAAC,GAAG,CAAE,yBAAiB,cAC7C,kCACI,KAAC,QAAQ,EAAC,IAAI,CAAE,aAAc,CAAC,GAAG,CAAEvC,KAAK,CAACG,GAAI,CAAC,GAAG,CAAE0B,GAAI,CAAC,MAAM,CAAEO,MAAO,CAAC,WAAW,CAAE3B,WAAY,CAAC,aAAa,CAAEK,aAAc,EAAE,EAChI,GACJ,GACJ,GACJ,CAEd,CAAC,CACD;AAEA,cAAef,gBAAe"},"metadata":{},"sourceType":"module"}